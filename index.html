<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weighment Data Entry System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
        }
        .container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 30px;
        }
        h1, h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 15px;
        }
        .form-label {
            font-weight: 500;
        }
        .table-responsive {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #e9ecef;
            position: sticky;
            top: 0;
        }
        .btn-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .calculated {
            background-color: #f8f9fa;
            font-weight: 500;
        }
        .section-header {
            background-color: #2c3e50;
            color: white;
            padding: 8px 15px;
            margin-top: 20px;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        .report-section {
            margin-top: 30px;
        }
        .report-filters {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .btn-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Weighment Data Entry System</h1>
        
        <form id="weighmentForm">
            <!-- Basic Information Section -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="accountingDate" class="form-label">Accounting Date</label>
                    <input type="date" class="form-control" id="accountingDate" required>
                </div>
                <div class="col-md-3">
                    <label for="date" class="form-label">Date</label>
                    <input type="date" class="form-control" id="date" required>
                </div>
                <div class="col-md-3">
                    <label for="shift" class="form-label">Shift</label>
                    <select class="form-select" id="shift" required>
                        <option value="">Select Shift</option>
                        <option value="Day">Day Shift</option>
                        <option value="Night">Night Shift</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="weighmentSlipNo" class="form-label">Weighment Slip No</label>
                    <input type="text" class="form-control" id="weighmentSlipNo">
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="deliveryChallanNo" class="form-label">Delivery Challan No</label>
                    <input type="text" class="form-control" id="deliveryChallanNo">
                </div>
                <div class="col-md-4">
                    <label for="royaltyPermitNo" class="form-label">Royalty Permit No</label>
                    <input type="text" class="form-control" id="royaltyPermitNo">
                </div>
                <div class="col-md-2">
                    <label for="permitQty" class="form-label">Permit Qty (MT)</label>
                    <input type="number" class="form-control" id="permitQty" step="0.01">
                </div>
                <div class="col-md-3">
                    <label for="royaltyRate" class="form-label">Royalty Rate</label>
                    <input type="number" class="form-control" id="royaltyRate" step="0.01">
                </div>
            </div>

            <!-- Customer Information Section -->
            <div class="row mb-4">
                <div class="col-md-2">
                    <label for="customerSrNo" class="form-label">Customer Sr.No.</label>
                    <input type="text" class="form-control" id="customerSrNo">
                </div>
                <div class="col-md-4">
                    <label for="customerName" class="form-label">Customer Name</label>
                    <input type="text" class="form-control" id="customerName">
                </div>
                <div class="col-md-3">
                    <label for="clientDetails" class="form-label">Client Details</label>
                    <input type="text" class="form-control" id="clientDetails">
                </div>
                <div class="col-md-3">
                    <label for="paymentMode" class="form-label">Payment Mode</label>
                    <select class="form-select" id="paymentMode">
                        <option value="">Select Payment Mode</option>
                        <option value="Cash">Cash</option>
                        <option value="Card">Card</option>
                        <option value="UPI">UPI</option>
                        <option value="Bank Transfer">Bank Transfer</option>
                        <option value="Credit">Credit</option>
                    </select>
                </div>
            </div>

            <!-- Vehicle Information -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="vehicleNo" class="form-label">Vehicle No</label>
                    <select class="form-select" id="vehicleNo">
                        <option value="">Select Vehicle</option>
                        <option value="TN01AB1234">TN01AB1234</option>
                        <option value="TN02CD5678">TN02CD5678</option>
                        <option value="TN03EF9012">TN03EF9012</option>
                        <option value="TN04GH3456">TN04GH3456</option>
                        <option value="TN05IJ7890">TN05IJ7890</option>
                        <option value="TN06KL2345">TN06KL2345</option>
                        <option value="TN07MN6789">TN07MN6789</option>
                        <option value="TN08OP0123">TN08OP0123</option>
                        <option value="TN09QR4567">TN09QR4567</option>
                        <option value="TN10ST8901">TN10ST8901</option>
                        <option value="new">+ Add New Vehicle</option>
                    </select>
                </div>
                <div id="newVehicleContainer" class="col-md-3" style="display: none;">
                    <label for="newVehicleNo" class="form-label">New Vehicle No</label>
                    <input type="text" class="form-control" id="newVehicleNo">
                </div>
                <div class="col-md-3">
                    <label for="material" class="form-label">Material</label>
                    <input type="text" class="form-control" id="material">
                </div>
                <div class="col-md-3">
                    <label for="transportRate" class="form-label">Transport Rate</label>
                    <input type="number" class="form-control" id="transportRate" step="0.01">
                </div>
            </div>

            <!-- Weighment Details Section -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="grossWt" class="form-label">Gross WT</label>
                    <input type="number" class="form-control" id="grossWt" step="0.01">
                </div>
                <div class="col-md-3">
                    <label for="tareWt" class="form-label">Tare WT</label>
                    <input type="number" class="form-control" id="tareWt" step="0.01">
                </div>
                <div class="col-md-3">
                    <label for="netWt" class="form-label">NET WT (Calculated)</label>
                    <input type="number" class="form-control calculated" id="netWt" readonly>
                </div>
                <div class="col-md-3">
                    <label for="ratePerTone" class="form-label">Rate Per Tone</label>
                    <input type="number" class="form-control" id="ratePerTone" step="0.01">
                </div>
            </div>

            <!-- Financial Information Section -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="saleAmount" class="form-label">Sale Amount (Calculated)</label>
                    <input type="number" class="form-control calculated" id="saleAmount" readonly>
                </div>
                <div class="col-md-3">
                    <label for="cashReceived" class="form-label">Cash Received</label>
                    <input type="number" class="form-control" id="cashReceived" step="0.01">
                </div>
                <div class="col-md-3">
                    <label for="customerBalance" class="form-label">Customer Balance Amount (â‚¹)</label>
                    <input type="number" class="form-control calculated" id="customerBalance" readonly>
                </div>
                <div class="col-md-3">
                    <label for="royaltyAmount" class="form-label">Royalty Amount (Calculated)</label>
                    <input type="number" class="form-control calculated" id="royaltyAmount" readonly>
                </div>
            </div>

            <!-- Additional Information -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <label for="transportAmount" class="form-label">Transport Amount (Calculated)</label>
                    <input type="number" class="form-control calculated" id="transportAmount" readonly>
                </div>
                <div class="col-md-3">
                    <label for="totalAmount" class="form-label">Total Amount (Calculated)</label>
                    <input type="number" class="form-control calculated" id="totalAmount" readonly>
                </div>
                <div class="col-md-3">
                    <label for="ftdDispatch" class="form-label">FTD Dispatch</label>
                    <select class="form-select" id="ftdDispatch">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="remarks" class="form-label">Remarks</label>
                    <input type="text" class="form-control" id="remarks">
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="btn-container">
                <button type="submit" class="btn btn-primary">Save Entry</button>
                <button type="reset" class="btn btn-secondary">Clear Form</button>
                <button type="button" class="btn btn-info" id="btnCalculate">Calculate Values</button>
                <button type="button" class="btn btn-success" id="btnExport">Export to Excel</button>
            </div>
        </form>
    </div>

    <div class="container">
        <h2>Data Records</h2>
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>S.NO</th>
                        <th>Date</th>
                        <th>Shift</th>
                        <th>Weighment Slip No</th>
                        <th>Customer Name</th>
                        <th>Vehicle No</th>
                        <th>NET WT</th>
                        <th>Sale Amount</th>
                        <th>FTD Dispatch</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="recordsTable">
                    <tr>
                        <td colspan="10" class="text-center">No records found</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="container report-section">
        <h2>Reports</h2>
        
        <!-- Truck Wise Report -->
        <div class="report-filters">
            <h4>Truck Wise Report</h4>
            <div class="row">
                <div class="col-md-4">
                    <label for="reportTruck" class="form-label">Select Vehicle</label>
                    <select class="form-select" id="reportTruck">
                        <option value="all">All Vehicles</option>
                        <option value="TN01AB1234">TN01AB1234</option>
                        <option value="TN02CD5678">TN02CD5678</option>
                        <option value="TN03EF9012">TN03EF9012</option>
                        <option value="TN04GH3456">TN04GH3456</option>
                        <option value="TN05IJ7890">TN05IJ7890</option>
                        <option value="TN06KL2345">TN06KL2345</option>
                        <option value="TN07MN6789">TN07MN6789</option>
                        <option value="TN08OP0123">TN08OP0123</option>
                        <option value="TN09QR4567">TN09QR4567</option>
                        <option value="TN10ST8901">TN10ST8901</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="reportDateFrom" class="form-label">From Date</label>
                    <input type="date" class="form-control" id="reportDateFrom">
                </div>
                <div class="col-md-4">
                    <label for="reportDateTo" class="form-label">To Date</label>
                    <input type="date" class="form-control" id="reportDateTo">
                </div>
            </div>
            <div class="mt-3">
                <button type="button" class="btn btn-primary" id="btnGenerateTruckReport">Generate Truck Report</button>
            </div>
        </div>

        <!-- Shift Wise Report -->
        <div class="report-filters mt-4">
            <h4>Shift Wise Report</h4>
            <div class="row">
                <div class="col-md-4">
                    <label for="reportShift" class="form-label">Select Shift</label>
                    <select class="form-select" id="reportShift">
                        <option value="all">All Shifts</option>
                        <option value="Day">Day Shift</option>
                        <option value="Night">Night Shift</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="reportShiftDate" class="form-label">Select Date</label>
                    <input type="date" class="form-control" id="reportShiftDate">
                </div>
                <div class="col-md-4">
                    <label for="reportFTD" class="form-label">FTD Dispatch</label>
                    <select class="form-select" id="reportFTD">
                        <option value="all">All</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
            </div>
            <div class="mt-3">
                <button type="button" class="btn btn-primary" id="btnGenerateShiftReport">Generate Shift Report</button>
            </div>
        </div>

        <!-- Report Results -->
        <div class="mt-4">
            <h4>Report Results</h4>
            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Shift</th>
                            <th>Vehicle No</th>
                            <th>Customer Name</th>
                            <th>NET WT</th>
                            <th>Sale Amount</th>
                            <th>Royalty Amount</th>
                            <th>Transport Amount</th>
                            <th>Total Amount</th>
                            <th>FTD Dispatch</th>
                        </tr>
                    </thead>
                    <tbody id="reportResults">
                        <tr>
                            <td colspan="10" class="text-center">No report generated yet</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set default dates to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('accountingDate').value = today;
            document.getElementById('date').value = today;
            document.getElementById('reportDateFrom').value = today;
            document.getElementById('reportDateTo').value = today;
            document.getElementById('reportShiftDate').value = today;
            
            // Show/hide new vehicle input based on selection
            document.getElementById('vehicleNo').addEventListener('change', function() {
                const newVehicleContainer = document.getElementById('newVehicleContainer');
                newVehicleContainer.style.display = this.value === 'new' ? 'block' : 'none';
            });
            
            // Calculate net weight when gross or tare weight changes
            document.getElementById('grossWt').addEventListener('input', calculateValues);
            document.getElementById('tareWt').addEventListener('input', calculateValues);
            
            // Calculate sale amount when net weight or rate changes
            document.getElementById('ratePerTone').addEventListener('input', calculateValues);
            
            // Calculate royalty amount when royalty rate or net weight changes
            document.getElementById('royaltyRate').addEventListener('input', calculateValues);
            
            // Calculate transport amount when transport rate or net weight changes
            document.getElementById('transportRate').addEventListener('input', calculateValues);
            
            // Calculate customer balance when cash received changes
            document.getElementById('cashReceived').addEventListener('input', calculateValues);
            
            // Manual calculation button
            document.getElementById('btnCalculate').addEventListener('click', calculateAllValues);
            
            // Export to Excel button
            document.getElementById('btnExport').addEventListener('click', exportToExcel);
            
            // Form submission
            document.getElementById('weighmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addRecord();
            });
            
            // Report generation buttons
            document.getElementById('btnGenerateTruckReport').addEventListener('click', generateTruckReport);
            document.getElementById('btnGenerateShiftReport').addEventListener('click', generateShiftReport);
            
            // Data storage
            let records = JSON.parse(localStorage.getItem('weighmentRecords')) || [];
            renderRecordsTable();
            
            function calculateValues() {
                // Calculate Net Weight
                const grossWt = parseFloat(document.getElementById('grossWt').value) || 0;
                const tareWt = parseFloat(document.getElementById('tareWt').value) || 0;
                const netWt = grossWt - tareWt;
                document.getElementById('netWt').value = netWt.toFixed(2);
                
                // Calculate Sale Amount
                const ratePerTone = parseFloat(document.getElementById('ratePerTone').value) || 0;
                const saleAmount = netWt * ratePerTone;
                document.getElementById('saleAmount').value = saleAmount.toFixed(2);
                
                // Calculate Royalty Amount
                const royaltyRate = parseFloat(document.getElementById('royaltyRate').value) || 0;
                const royaltyAmount = netWt * royaltyRate;
                document.getElementById('royaltyAmount').value = royaltyAmount.toFixed(2);
                
                // Calculate Transport Amount
                const transportRate = parseFloat(document.getElementById('transportRate').value) || 0;
                const transportAmount = netWt * transportRate;
                document.getElementById('transportAmount').value = transportAmount.toFixed(2);
                
                // Calculate Total Amount
                const totalAmount = saleAmount + royaltyAmount + transportAmount;
                document.getElementById('totalAmount').value = totalAmount.toFixed(2);
                
                // Calculate Customer Balance
                const cashReceived = parseFloat(document.getElementById('cashReceived').value) || 0;
                const customerBalance = totalAmount - cashReceived;
                document.getElementById('customerBalance').value = customerBalance.toFixed(2);
            }
            
            function calculateAllValues() {
                calculateValues();
                alert("All values have been calculated.");
            }
            
            function addRecord() {
                calculateValues();
                
                // Get vehicle number (either from dropdown or new input)
                let vehicleNo = document.getElementById('vehicleNo').value;
                if (vehicleNo === 'new') {
                    vehicleNo = document.getElementById('newVehicleNo').value;
                    if (!vehicleNo) {
                        alert("Please enter a vehicle number");
                        return;
                    }
                }
                
                // Create record object
                const record = {
                    accountingDate: document.getElementById('accountingDate').value,
                    date: document.getElementById('date').value,
                    shift: document.getElementById('shift').value,
                    weighmentSlipNo: document.getElementById('weighmentSlipNo').value,
                    deliveryChallanNo: document.getElementById('deliveryChallanNo').value,
                    royaltyPermitNo: document.getElementById('royaltyPermitNo').value,
                    permitQty: document.getElementById('permitQty').value,
                    royaltyRate: document.getElementById('royaltyRate').value,
                    customerSrNo: document.getElementById('customerSrNo').value,
                    customerName: document.getElementById('customerName').value,
                    clientDetails: document.getElementById('clientDetails').value,
                    paymentMode: document.getElementById('paymentMode').value,
                    vehicleNo: vehicleNo,
                    material: document.getElementById('material').value,
                    transportRate: document.getElementById('transportRate').value,
                    grossWt: document.getElementById('grossWt').value,
                    tareWt: document.getElementById('tareWt').value,
                    netWt: document.getElementById('netWt').value,
                    ratePerTone: document.getElementById('ratePerTone').value,
                    saleAmount: document.getElementById('saleAmount').value,
                    cashReceived: document.getElementById('cashReceived').value,
                    customerBalance: document.getElementById('customerBalance').value,
                    royaltyAmount: document.getElementById('royaltyAmount').value,
                    transportAmount: document.getElementById('transportAmount').value,
                    totalAmount: document.getElementById('totalAmount').value,
                    ftdDispatch: document.getElementById('ftdDispatch').value,
                    remarks: document.getElementById('remarks').value
                };
                
                // Add to records array
                records.push(record);
                
                // Save to localStorage
                localStorage.setItem('weighmentRecords', JSON.stringify(records));
                
                // Update table
                renderRecordsTable();
                
                // Reset the form
                document.getElementById('weighmentForm').reset();
                
                // Set default dates to today again
                document.getElementById('accountingDate').value = today;
                document.getElementById('date').value = today;
                
                // Hide new vehicle container if shown
                document.getElementById('newVehicleContainer').style.display = 'none';
                
                alert("Record added successfully!");
            }
            
            function renderRecordsTable() {
                const tableBody = document.getElementById('recordsTable');
                tableBody.innerHTML = '';
                
                if (records.length === 0) {
                    const row = tableBody.insertRow();
                    const cell = row.insertCell(0);
                    cell.textContent = 'No records found';
                    cell.colSpan = 10;
                    cell.className = 'text-center';
                    return;
                }
                
                records.forEach((record, index) => {
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = index + 1;
                    row.insertCell(1).textContent = record.date;
                    row.insertCell(2).textContent = record.shift;
                    row.insertCell(3).textContent = record.weighmentSlipNo;
                    row.insertCell(4).textContent = record.customerName;
                    row.insertCell(5).textContent = record.vehicleNo;
                    row.insertCell(6).textContent = record.netWt;
                    row.insertCell(7).textContent = record.saleAmount;
                    row.insertCell(8).textContent = record.ftdDispatch;
                    
                    const actionsCell = row.insertCell(9);
                    actionsCell.innerHTML = '<button class="btn btn-sm btn-info">View</button> <button class="btn btn-sm btn-danger">Delete</button>';
                    
                    // Add event listener to delete button
                    actionsCell.querySelector('.btn-danger').addEventListener('click', function() {
                        records.splice(index, 1);
                        localStorage.setItem('weighmentRecords', JSON.stringify(records));
                        renderRecordsTable();
                    });
                    
                    // Add event listener to view button
                    actionsCell.querySelector('.btn-info').addEventListener('click', function() {
                        viewRecord(record);
                    });
                });
            }
            
            function viewRecord(record) {
                alert(`Viewing record details:\nDate: ${record.date}\nCustomer: ${record.customerName}\nVehicle: ${record.vehicleNo}\nNet Weight: ${record.netWt} MT\nSale Amount: â‚¹${record.saleAmount}`);
            }
            
            function generateTruckReport() {
                const vehicleNo = document.getElementById('reportTruck').value;
                const dateFrom = document.getElementById('reportDateFrom').value;
                const dateTo = document.getElementById('reportDateTo').value;
                
                let filteredRecords = records.filter(record => {
                    const recordDate = new Date(record.date);
                    const fromDate = new Date(dateFrom);
                    const toDate = new Date(dateTo);
                    toDate.setDate(toDate.getDate() + 1); // Include the end date
                    
                    return recordDate >= fromDate && recordDate <= toDate && 
                           (vehicleNo === 'all' || record.vehicleNo === vehicleNo);
                });
                
                displayReportResults(filteredRecords);
            }
            
            function generateShiftReport() {
                const shift = document.getElementById('reportShift').value;
                const date = document.getElementById('reportShiftDate').value;
                const ftdDispatch = document.getElementById('reportFTD').value;
                
                let filteredRecords = records.filter(record => {
                    return record.date === date && 
                           (shift === 'all' || record.shift === shift) &&
                           (ftdDispatch === 'all' || record.ftdDispatch === ftdDispatch);
                });
                
                displayReportResults(filteredRecords);
            }
            
            function displayReportResults(filteredRecords) {
                const resultsBody = document.getElementById('reportResults');
                resultsBody.innerHTML = '';
                
                if (filteredRecords.length === 0) {
                    const row = resultsBody.insertRow();
                    const cell = row.insertCell(0);
                    cell.textContent = 'No records match the criteria';
                    cell.colSpan = 10;
                    cell.className = 'text-center';
                    return;
                }
                
                filteredRecords.forEach(record => {
                    const row = resultsBody.insertRow();
                    row.insertCell(0).textContent = record.date;
                    row.insertCell(1).textContent = record.shift;
                    row.insertCell(2).textContent = record.vehicleNo;
                    row.insertCell(3).textContent = record.customerName;
                    row.insertCell(4).textContent = record.netWt;
                    row.insertCell(5).textContent = record.saleAmount;
                    row.insertCell(6).textContent = record.royaltyAmount;
                    row.insertCell(7).textContent = record.transportAmount;
                    row.insertCell(8).textContent = record.totalAmount;
                    row.insertCell(9).textContent = record.ftdDispatch;
                });
            }
            
            function exportToExcel() {
                // This would typically use a library like SheetJS to export data
                if (records.length === 0) {
                    alert("No records to export");
                    return;
                }
                
                // Create CSV content
                let csvContent = "Accounting Date,Date,Shift,Weighment Slip No,Delivery Challan No,Royalty Permit No,Permit Qty,Royalty Rate,Customer Sr.No,Customer Name,Client Details,Payment Mode,Vehicle No,Material,Transport Rate,Gross WT,Tare WT,NET WT,Rate Per Tone,Sale Amount,Cash Received,Customer Balance,Royalty Amount,Transport Amount,Total Amount,FTD Dispatch,Remarks\n";
                
                records.forEach(record => {
                    csvContent += `"${record.accountingDate}","${record.date}","${record.shift}","${record.weighmentSlipNo}","${record.deliveryChallanNo}","${record.royaltyPermitNo}","${record.permitQty}","${record.royaltyRate}","${record.customerSrNo}","${record.customerName}","${record.clientDetails}","${record.paymentMode}","${record.vehicleNo}","${record.material}","${record.transportRate}","${record.grossWt}","${record.tareWt}","${record.netWt}","${record.ratePerTone}","${record.saleAmount}","${record.cashReceived}","${record.customerBalance}","${record.royaltyAmount}","${record.transportAmount}","${record.totalAmount}","${record.ftdDispatch}","${record.remarks}"\n`;
                });
                
                // Create download link
                const encodedUri = encodeURI("data:text/csv;charset=utf-8," + csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "weighment_data.csv");
                document.body.appendChild(link);
                
                link.click();
                document.body.removeChild(link);
            }
        });
    </script>
</body>
</html>
